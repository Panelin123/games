<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jogo da Cobrinha 2D</title>
    <link rel="stylesheet" href="quiz.css">
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet" />
</head>
<body>
    <div class="mascote-container">
      <img src="img/image-removebg-preview.png" alt="Mascote" class="mascote" />
      <div class="balao-fala">
        Esse √© o jogo da cobrinha, fa√ßa ela comer as ma√ß√£s at√© ela ficar gigante!
      </div>
    </div>

    <div class="difficulty-overlay" id="difficultyOverlay">
        <div class="difficulty-content">
            <h2 class="difficulty-title">Escolha a Dificuldade</h2>
            <div class="difficulty-buttons">
                <button class="btn-difficulty btn-easy" onclick="selectDifficulty('easy')">
                    üü¢ F√°cil
                    <span class="difficulty-desc">Velocidade Normal</span>
                </button>
                <button class="btn-difficulty btn-medium" onclick="selectDifficulty('medium')">
                    üü° M√©dio
                    <span class="difficulty-desc">Velocidade R√°pida</span>
                </button>
                <button class="btn-difficulty btn-hard" onclick="selectDifficulty('hard')">
                    üî¥ Dif√≠cil
                    <span class="difficulty-desc">Muito R√°pido + 2 Frutas</span>
                </button>
            </div>
        </div>
    </div>

    <div class="game-container">
        <h1 class="game-title">üêç Jogo da Cobrinha üêç</h1>
        
        <div class="game-info">
            <div class="score-display">
                <div class="score-label">Pontua√ß√£o</div>
                <div class="score-value" id="score">0</div>
            </div>
            <div class="score-display">
                <div class="score-label">Recorde</div>
                <div class="score-value" id="highScore">0</div>
            </div>
            <div class="score-display">
                <div class="score-label">Tamanho</div>
                <div class="score-value" id="length">1</div>
            </div>
            <div class="score-display">
                <div class="score-label">Dificuldade</div>
                <div class="score-value" id="difficulty">-</div>
            </div>
        </div>

        <canvas id="gameCanvas" class="game-canvas" width="400" height="400"></canvas>

        <div class="controls">
            <button class="btn btn-pause" id="pauseBtn" onclick="pauseGame()" disabled> Pausar</button>
            <button class="btn btn-restart" onclick="restartGame()"> Reiniciar</button>
        </div>
    </div>

    <div class="pause-overlay" id="pauseOverlay">
        <div class="pause-content">
            <h2 class="pause-title"> Jogo Pausado</h2>
            <p>Pressione o bot√£o "Continuar" ou a tecla ESPA√áO para retomar</p>
            <button class="btn btn-start" onclick="resumeGame()" style="margin-top: 15px;"> Continuar</button>
        </div>
    </div>

    <div class="game-over" id="gameOverModal">
        <div class="game-over-content">
            <h2 class="game-over-title">
                <span>Game</span> <span>Over</span>
            </h2>
            <div class="final-score" id="finalScore">Pontua√ß√£o Final: 0</div>
            <button class="btn btn-restart" onclick="restartGame()"> Jogar Novamente</button>
            <button class="btn game-over-btn" id="returnMenuBtn" onclick="returnToMenu()"> Retornar ao Menu</button>
        </div>
    </div>

    <button id="playFallback" aria-label="Ativar som">Ativar som</button>

    <script>
        (function() {
            const audio = document.getElementById('bgAudio');
            const fallback = document.getElementById('playFallback');

            function tryAutoplay() {
                if (audio) {
                    audio.play().then(() => {
                        console.log('√Åudio tocando automaticamente');
                    }).catch((err) => {
                        console.warn('Autoplay bloqueado:', err);
                        fallback.style.display = 'block';
                    });
                }
            }

            fallback.addEventListener('click', function() {
                if (audio) {
                    audio.play().then(() => {
                        fallback.style.display = 'none';
                    }).catch((e) => {
                        console.error('Erro ao iniciar √°udio ap√≥s clique:', e);
                    });
                }
            });

            document.addEventListener('DOMContentLoaded', tryAutoplay);

            function unlockOnFirstInteraction() {
                if (audio) audio.play().catch(()=>{});
                document.removeEventListener('click', unlockOnFirstInteraction);
                document.removeEventListener('touchstart', unlockOnFirstInteraction);
            }
            document.addEventListener('click', unlockOnFirstInteraction);
            document.addEventListener('touchstart', unlockOnFirstInteraction);
        })();
    </script>
    <script src="app3.js"></script>
</body>
</html>